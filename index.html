<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMARTTECH Landing Page with Firestore & Admin Export</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Poppins Font Import -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Configure Tailwind for new colors and Poppins font -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // New Palette Definitions
                        'primary-bg': '#0F2240',      // white - Background
                        'primary-cta': '#0B10DE',     // Electric Blue - Primary Action
                        'accent-gold': '#FEC611',     // Bright Gold/Yellow - Urgency/Accent 1
                        'accent-cyan': '#36CEFF',     // Light white - Secondary Accent 2
                        'light-text': '#C2C4EB',      // Light Lavender/Periwinkle - Main Text Color
                        
                        // Retaining a white card color for depth against primary-bg
                        'white-card': '#1C243B', 
                    },
                    fontFamily: {
                        // Poppins as the primary font, with Sfprodisplay fallback
                        sans: ['Poppins', 'Sfprodisplay', 'sans-serif'],
                    },
                    boxShadow: {
                        '3xl': '0 35px 60px -15px rgba(0, 0, 0, 0.3)',
                        // Updated glow colors to match the new palette
                        'glow-blue': '0 0 20px rgba(11, 16, 222, 0.8)', // Primary CTA glow
                        'glow-gold': '0 0 10px rgba(254, 198, 17, 1)',   // Accent Gold glow
                        'glow-cyan': '0 0 15px rgba(54, 206, 255, 0.9)', // New Cyan Glow for chat
                        'popup-glow': '0 0 40px rgba(254, 198, 17, 0.8)', // Extra strong glow for modal
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom styles for professional background texture and hero section */
        body {
            background-color: #0F2240; /* primary-bg */
            color: #C2C4EB; /* light-text */
            font-family: 'Poppins', 'Sfprodisplay', sans-serif;
            transition: background-color 0.3s;
        }
        .hero-section {
            /* Abstract geometric background pattern for a tech vibe */
            background-image: radial-gradient(at 0% 0%, #1C243B 0px, transparent 50%), 
                              radial-gradient(at 100% 100%, #0F2240 0px, transparent 50%);
            min-height: 80vh;
            display: flex;
            align-items: center;
        }

        .cta-button {
            transition: all 0.3s;
        }

        .cta-button:hover {
            /* Use primary-cta color for glow */
            box-shadow: 0 0 20px rgba(11, 16, 222, 0.8), 0 0 5px rgba(11, 16, 222, 1); 
            transform: translateY(-2px);
            opacity: 0.95;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            border-color: #0B10DE; /* primary-cta border on hover */
        }

        /* Fixed floating button style */
        .fixed-chat-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 90; /* Below message box, above content */
        }
        
        .fixed-chat-button:hover {
            box-shadow: 0 0 20px rgba(54, 206, 255, 1);
            transform: scale(1.05);
        }
        
        /* Ensure the export button handles the disabled state visually */
        .export-button:disabled {
            background-color: #3f4553;
            cursor: not-allowed;
            opacity: 0.6;
            box-shadow: none;
        }

        /* Testimonial Marquee Styles */
        .testimonial-container {
            overflow: hidden;
            mask-image: linear-gradient(to right, transparent, white 20%, white 80%, transparent);
        }

        .testimonial-track {
            display: flex;
            width: fit-content;
            animation: marquee 30s linear infinite;
            padding-bottom: 1rem; /* For shadow */
        }
        
        .testimonial-track:hover {
            animation-play-state: paused;
        }

        .testimonial-card {
            flex: 0 0 auto;
            width: 320px; /* Fixed width for card */
            margin-right: 2rem;
        }

        @keyframes marquee {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); } /* Move half the length of the track */
        }
        
        @media (max-width: 768px) {
            .testimonial-card {
                width: 280px;

    </style>
</head>
<body>

    <!-- Message Box for Form Feedback (Replaces alert()) -->
    <div id="message-box" class="fixed top-5 right-5 p-4 rounded-xl shadow-lg text-white font-semibold hidden z-[100] transition-all duration-300 transform">
        <div class="flex items-center justify-between">
            <span id="message-text"></span>
            <button onclick="hideMessage()" class="ml-4 text-white/80 hover:text-white">&times;</button>
        </div>
    </div>

    <div class="min-h-screen">
        <!-- 1ST: Header -->
        <header class="max-w-7xl mx-auto px-4 py-4 md:py-6 flex justify-between items-center border-b border-light-text/20 sticky top-0 z-50 bg-primary-bg/95 backdrop-blur-sm">
            <h1 class="text-xl md:text-2xl font-extrabold text-white">
                SMART TECH Solutions <span class="text-accent-gold">&</span> Trainings
            </h1>
            <a href="#final-enrollment" class="bg-primary-cta text-white font-bold py-2 px-6 rounded-xl shadow-lg shadow-primary-cta/30 hover:opacity-90 transition duration-300 transform hover:scale-[1.03]">
                Register Now
            </a>
        </header>

        <!-- 1ST: Hero Section (Attention & Urgency) -->
        <section class="hero-section max-w-7xl mx-auto px-4 py-16 md:py-24 text-center">
            <div class="w-full">
                <p class="text-accent-gold uppercase font-semibold text-sm mb-3 tracking-widest">SMARTTECH DIGITAL SKILLS BOOTCAMP COHORT 2.0</p>
                
                <h2 class="text-4xl md:text-7xl font-extrabold text-white mb-6 leading-tight max-w-5xl mx-auto">
                    Transform Your Future: <span class="text-primary-cta block md:inline">Master A Digital Skill</span> in Just 5 Weeks.
                </h2>
                
                <p class="max-w-3xl mx-auto text-lg md:text-xl text-light-text/90 mb-10">
                    Gain a high-demand, remote-ready skill from our 10 specialized skills (Web Dev, Data Analysis, Content Writing, and more) and access Guaranteed Internship Opportunities.
                </p>

                <!-- Key Dates & CTA Block (Initial CTA) -->
                <div class="bg-dark-card p-6 md:p-8 rounded-2xl max-w-2xl mx-auto shadow-3xl border-2 border-primary-cta/50">
                    <p class="text-xl md:text-2xl font-bold text-white mb-2">
                        Early Bird Ends Soon
                    </p>
                    <p class="text-6xl md:text-7xl font-extrabold mb-4 text-accent-gold">
                        â‚¦5,000
                        <span class="text-2xl text-light-text/60">/ $3 USD</span>
                    </p>
                    <a href="#final-enrollment" class="cta-button w-full inline-block bg-primary-cta text-white font-extrabold text-xl py-4 rounded-xl shadow-glow-blue hover:opacity-90">
                         ENROLL NOW & Secure Your Spot
                    </a>
                    <p class="text-sm text-light-text/60 mt-3">Late Registration Price: â‚¦15,000 / $10 USD. Seats are strictly limited.</p>
                </div>
            </div>
        </section>

        <!-- 2ND: Trust Section (Immediate Credibility) -->
        <section class="max-w-7xl mx-auto px-4 py-16 text-center">
            <h3 class="text-2xl font-semibold text-light-text mb-8">
                Over 200+ Students Launched Their digital Careers with SMARTTECH
            </h3>
            <div class="flex flex-wrap justify-center items-center gap-6 text-light-text/70">
                <span class="flex items-center space-x-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14v6m-3-3h6M6 10h2m0 0h2m0 0l-2 2m2-2l-2-2m2 2h2m-2-2v4m-4 8h10a2 2 0 002-2V7a2 2 0 00-2-2H4a2 2 0 00-2 2v10a2 2 0 002 2h4"></path></svg>
                    <span>10 Specialized skills</span>
                </span>
                <span class="flex items-center space-x-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span>Only 5 Weeks</span>
                </span>
                <span class="flex items-center space-x-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9h6"></path></svg>
                    <span>100% Remote & Online</span>
                </span>
            </div>
        </section>
        
        <!-- 3RD: Testimonials Section (Desire & Emotional Proof) -->
        <section class="py-16 md:py-24 bg-dark-card/50">
            <h3 class="text-3xl md:text-5xl font-extrabold text-center mb-12 text-white">
                Hear From Our Successful Graduates
            </h3>
            
            <!-- Marquee Container -->
            <div class="testimonial-container">
                <!-- Duplicate the track content to ensure seamless looping -->
                <div class="testimonial-track">
                    <!-- TESTIMONIALS (Repeated twice for loop effect) -->
                    <!-- Start of Testimonial Group 1 -->
                    
                    <!-- Card 1: Favour Elohor -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "The quality of teaching was excellent. Our instructor effectively answered our questions and provided useful materials. I feel much more confident in my skills now."
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=FE" alt="Favour Elohor" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">Favour Elohor</p>
                                <p class="text-sm text-light-text/70">Graduate of Graphic Design</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2: Khamigje Omosenobua Precious -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "I honestly can't express the amount of appreciation I have for the team. The teachings were so down to earth, understandable, and applicable. It was worth it."
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=KO" alt="K.O. Precious" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">K. Omosenobua Precious</p>
                                <p class="text-sm text-light-text/70">Graduate of Social Media Management</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card 3: Kunle-Efunnuga Ruth Ifeoluwa -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "The teaching quality was exceptional, with clear guidance and practical examples that made complex concepts accessible. I highly recommend this bootcamp."
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=KR" alt="Kunle-Efunnuga Ruth" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">Kunle-Efunnuga Ruth</p>
                                <p class="text-sm text-light-text/70">Graduate of Virtual Assistant Training</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card 4: Olise Sophia Amarachi -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "Our outstanding tutor simplified complex topics and provided invaluable feedback. I can now automate reports and clean data efficiently. Perfect launchpad!"
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=OS" alt="Olise Sophia" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">Olise Sophia Amarachi</p>
                                <p class="text-sm text-light-text/70">Graduate of Data Analytics</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card 5: Zarah Hope -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "The well-structured program made learning enjoyable and effective. The tutor's knowledge and approachable style made complex topics understandable and inspired me."
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=ZH" alt="Zarah Hope" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">Zarah Hope</p>
                                <p class="text-sm text-light-text/70">Graduate of Flutter Mobile Development</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- End of Testimonial Group 1 -->

                    <!-- Start of Testimonial Group 2 (Duplicate for Marquee effect) -->

                    <!-- Card 1: Favour Elohor -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "The quality of teaching was excellent. Our instructor effectively answered our questions and provided useful materials. I feel much more confident in my skills now."
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=FE" alt="Favour Elohor" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">Favour Elohor</p>
                                <p class="text-sm text-light-text/70">Graduate of Graphic Design</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2: Khamigje Omosenobua Precious -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "I honestly can't express the amount of appreciation I have for the team. The teachings were so down to earth, understandable, and applicable. It was worth it."
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=KO" alt="K.O. Precious" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">K. Omosenobua Precious</p>
                                <p class="text-sm text-light-text/70">Graduate of Social Media Management</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card 3: Kunle-Efunnuga Ruth Ifeoluwa -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "The teaching quality was exceptional, with clear guidance and practical examples that made complex concepts accessible. I highly recommend this bootcamp."
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=KR" alt="Kunle-Efunnuga Ruth" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">Kunle-Efunnuga Ruth</p>
                                <p class="text-sm text-light-text/70">Graduate of Virtual Assistant Training</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card 4: Olise Sophia Amarachi -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "Our outstanding tutor simplified complex topics and provided invaluable feedback. I can now automate reports and clean data efficiently. Perfect launchpad!"
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=OS" alt="Olise Sophia" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">Olise Sophia Amarachi</p>
                                <p class="text-sm text-light-text/70">Graduate of Data Analytics</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card 5: Zarah Hope -->
                    <div class="testimonial-card bg-primary-bg p-6 rounded-xl shadow-xl border border-primary-cta/40 hover:scale-[1.01] transition duration-300">
                        <p class="text-lg font-semibold text-white mb-4">
                            "The well-structured program made learning enjoyable and effective. The tutor's knowledge and approachable style made complex topics understandable and inspired me."
                        </p>
                        <div class="flex items-center space-x-4 pt-4 border-t border-light-text/20">
                            <img src="https://placehold.co/40x40/0B10DE/FFFFFF?text=ZH" alt="Zarah Hope" class="w-10 h-10 rounded-full object-cover">
                            <div>
                                <p class="text-accent-gold font-bold">Zarah Hope</p>
                                <p class="text-sm text-light-text/70">Graduate of Flutter Mobile Development</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- End of Testimonial Group 2 -->
                </div>
            </div>
        </section>
        <!-- End of Testimonials Section -->
        
        <!-- 4TH: Key Benefits Section (Interest & Value Justification) -->
        <section class="max-w-7xl mx-auto px-4 py-16 md:pt-0 md:pb-24 bg-dark-card/50 rounded-2xl shadow-inner border border-primary-bg/50">
            <h3 class="text-3xl md:text-5xl font-extrabold text-center mb-16 text-accent-gold">
                What Makes the SMARTTECH Bootcamp Stand Out
            </h3>
            <div class="grid md:grid-cols-2 gap-10">
                <!-- Learning & Curriculum -->
                <div class="space-y-8 p-6 bg-dark-card rounded-xl shadow-xl border-l-4 border-primary-cta">
                    <h4 class="text-3xl font-bold text-white">High-Impact Learning Model</h4>
                    <ul class="space-y-6">
                        <li class="flex items-start space-x-4">
                            <span class="text-primary-cta text-3xl flex-shrink-0">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c1.657 0 3 .895 3 2s-1.343 2-3 2v5h3m-3 0v-5m0 0c-1.657 0-3-.895-3-2s1.343-2 3-2z"></path></svg>
                            </span>
                            <p class="flex-1">
                                <strong class="font-semibold text-white text-lg">Self-Paced Video Library:</strong> Access all video lessons instantly and learn at your own pace, fitting education around your schedule.
                            </p>
                        </li>
                        <li class="flex items-start space-x-4">
                            <span class="text-primary-cta text-3xl flex-shrink-0">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.789v6.422a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                            </span>
                            <p class="flex-1">
                                <strong class="font-semibold text-white text-lg">Live Tutors & Q&A:</strong> Weekly live sessions ensure you receive personalized, practical guidance and never get stuck.
                            </p>
                        </li>
                         <li class="flex items-start space-x-4">
                            <span class="text-primary-cta text-3xl flex-shrink-0">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20v-2c0-.594-.035-1.173-.105-1.743M13 18v1m0-10V4.546c0-.49 1.144-.806 2.593-.687C17.388 4.092 18.25 4 19 4h.01M5 18h5M4 8h.01M19 8h.01M6 18h.01M17 18h.01M17 18V9.5M4.9 16.9H9.1"></path></svg>
                            </span>
                            <p class="flex-1">
                                <strong class="font-semibold text-white text-lg">Learn From Industry Experts:</strong> Our instructors are experienced professionals who provide current, real-world strategies and insights.
                            </p>
                        </li>
                        <li class="flex items-start space-x-4">
                            <span class="text-primary-cta text-3xl flex-shrink-0">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.108a9 9 0 10-10.966 11.237l3.208 4.277a1 1 0 001.558-.005l3.208-4.277A9 9 0 0021 12z"></path></svg>
                            </span>
                            <p class="flex-1">
                                <strong class="font-semibold text-white text-lg">Project-Based Learning:</strong> Hands-on projects and assignments that build a job-ready portfolio you can show employers.
                            </p>
                        </li>
                    </ul>
                </div>

                <!-- Career & Community -->
                <div class="space-y-8 p-6 bg-dark-card rounded-xl shadow-xl border-l-4 border-accent-gold">
                    <h4 class="text-3xl font-bold text-white">Career & Community Support</h4>
                    <ul class="space-y-6">
                        <li class="flex items-start space-x-4">
                            <span class="text-accent-gold text-3xl flex-shrink-0">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.565 23.565 0 0112 15c-3.185 0-6.293-.682-9-1.995M10.5 19H12a2 2 0 002-2v-4.793c0-.621.5-1.127 1.122-1.242a.965.965 0 01.76.104l3.712 2.784a.97.97 0 01.353.753V17a2 2 0 01-2 2h-1.5"></path></svg>
                            </span>
                            <p class="flex-1">
                                <strong class="font-semibold text-white text-lg">Guaranteed Internship:</strong> Direct access to internship opportunities with Smart Tech Solutions & Trainings to gain crucial experience.
                            </p>
                        </li>
                        <li class="flex items-start space-x-4">
                            <span class="text-accent-gold text-3xl flex-shrink-0">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            </span>
                            <p class="flex-1">
                                <strong class="font-semibold text-white text-lg">Certificate & Resources:</strong> Receive a professional Certificate of Completion and access to our exclusive resource library.
                            </p>
                        </li>
                        <li class="flex items-start space-x-4">
                            <span class="text-accent-gold text-3xl flex-shrink-0">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20v-2c0-.594-.035-1.173-.105-1.743M13 18v1m0-10V4.546c0-.49 1.144-.806 2.593-.687C17.388 4.092 18.25 4 19 4h.01M5 18h5M4 8h.01M19 8h.01M6 18h.01M17 18h.01M17 18V9.5M4.9 16.9H9.1"></path></svg>
                            </span>
                            <p class="flex-1">
                                <strong class="font-semibold text-white text-lg">Lifetime Community:</strong> Get ongoing support and networking with our private Remote Work & Freelancing Community.
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="mt-16 text-center">
                <a href="#final-enrollment" class="inline-block bg-accent-gold text-primary-bg font-extrabold text-2xl py-4 px-12 rounded-xl shadow-lg shadow-accent-gold/50 hover:bg-yellow-400 transition duration-300 transform hover:scale-[1.03]">
                    ENROLL NOW
                </a>
            </div>
        </section>

        <!-- 5TH: Course Selection Section (Finalizing Interest) -->
        <section class="max-w-7xl mx-auto px-4 py-16 md:pt-16 md:pb-24">
            <h3 class="text-3xl md:text-5xl font-extrabold text-center mb-16 text-white">
                10 High-Demand Skills. One Low Price.
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-8">
                <!-- 1. Virtual Assistance -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14v6m-3-3h6M6 10h2m0 0h2m0 0l-2 2m2-2l-2-2m2 2h2m-2-2v4m-4 8h10a2 2 0 002-2V7a2 2 0 00-2-2H4a2 2 0 00-2 2v10a2 2 0 002 2h4"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Virtual Assistance</p>
                    <p class="text-sm text-light-text/70">Become an indispensable remote assistant.</p>
                </div>
                
                <!-- 2. Video Editing -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.789v6.422a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Video Editing</p>
                    <p class="text-sm text-light-text/70">Master production for social media and brands.</p>
                </div>
                
                <!-- 3. Web Development -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Web Development</p>
                    <p class="text-sm text-light-text/70">Build fast, modern websites from scratch.</p>
                </div>
                
                <!-- 4. Data Analysis -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0h6"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Data Analysis</p>
                    <p class="text-sm text-light-text/70">Turn raw data into actionable business insights.</p>
                </div>
                
                <!-- 5. Graphic Design -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-9-6h.01M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Graphic Design</p>
                    <p class="text-sm text-light-text/70">Create compelling visual content and branding.</p>
                </div>
                
                <!-- 6. Content Writing -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Content Writing</p>
                    <p class="text-sm text-light-text/70">Engage audiences with high-quality blog posts and articles.</p>
                </div>
                
                <!-- 7. Copywriting -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Copywriting</p>
                    <p class="text-sm text-light-text/70">Write high-converting sales and marketing materials.</p>
                </div>
                
                <!-- 8. Flutter Mobile Dev -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Flutter Mobile Dev</p>
                    <p class="text-sm text-light-text/70">Develop cross-platform mobile applications.</p>
                </div>
                
                <!-- 9. Digital Marketing -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Digital Marketing</p>
                    <p class="text-sm text-light-text/70">Drive traffic, leads, and sales for any business.</p>
                </div>

                <!-- 10. Social Media Management -->
                <div class="bg-dark-card p-6 rounded-xl shadow-lg transition duration-300 border border-primary-cta/40 card-hover flex flex-col items-start space-y-2">
                    <span class="text-primary-cta p-2 bg-primary-cta/10 rounded-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6.364-1.636a2 2 0 112.828 2.828l-7.485 7.485A5 5 0 0113.313 18H5V6h6.828a2 2 0 011.414.586l4.242 4.242z"></path></svg>
                    </span>
                    <p class="text-lg font-bold text-white">Social Media Management</p>
                    <p class="text-sm text-light-text/70">Develop effective strategies to boost online presence.</p>
                </div>
            </div>
        </section>

        <!-- 6TH: Final Pricing & Registration Section (Action) -->
        <section class="max-w-7xl mx-auto px-4 py-16 md:py-24 text-center" id="final-enrollment">
            <div class="max-w-4xl mx-auto bg-dark-card p-8 rounded-2xl border-4 border-primary-cta shadow-3xl shadow-primary-cta/40">
                <p class="text-3xl md:text-4xl font-extrabold text-white mb-4">
                    Complete Your Enrollment
                </p>
                <p class="text-xl text-light-text/90 mb-8">
                    Click the button below to finalize the <span class="text-accent-gold font-bold">â‚¦5,000 / $3 USD Early Bird</span> registration via the secure payment link.
                </p>

                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Naira Payment -->
                    <div class="bg-primary-bg p-6 rounded-xl border border-primary-cta shadow-lg">
                        <p class="text-xl font-bold text-white mb-2">Registration in <span class="text-accent-gold">Naira (â‚¦)</span></p>
                        <p class="text-6xl font-black text-accent-gold mb-6">â‚¦5,000</p>
                        <!-- Updated with Paystack Link -->
                        <a href="https://paystack.shop/pay/smarttechst" class="cta-button w-full inline-block bg-accent-gold text-primary-bg font-extrabold text-lg py-4 rounded-lg hover:bg-yellow-400 transition transform hover:scale-[1.01]" target="_blank">
                            Proceed to Payment
                        </a>
                    </div>

                    <!-- USD Payment -->
                    <div class="bg-primary-bg p-6 rounded-xl border border-primary-cta shadow-lg">
                        <p class="text-xl font-bold text-white mb-2">Registration in <span class="text-accent-gold">USD ($)</span></p>
                        <p class="text-6xl font-black text-accent-gold mb-6">$3 USD</p>
                        <!-- Updated with Paystack Link -->
                        <a href="https://paystack.shop/pay/smarttechst" class="cta-button w-full inline-block bg-primary-cta text-white font-extrabold text-lg py-4 rounded-lg hover:opacity-90 transition transform hover:scale-[1.01]" target="_blank">
                            Proceed to Payment
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- 7TH: Newsletter & Free Resource Section (Soft Exit / Retention) -->
        <section class="max-w-7xl mx-auto px-4 py-16 md:py-24 text-center">
            <div class="max-w-2xl mx-auto bg-dark-card p-10 rounded-2xl shadow-xl border border-light-text/40">
                <h3 class="text-3xl font-extrabold text-white mb-4">
                    Stay Updated with SMARTTECH Insights
                </h3>
                <p class="text-lg text-light-text/70 mb-8">
                    Sign up for our newsletter to get weekly updates, exclusive resources, new course announcements, and industry insights.
                </p>

                <form id="newsletter-form" onsubmit="submitNewsletter(event)" class="space-y-4">
                    <input type="email" id="newsletter-email" placeholder="Enter your email address..." required 
                           class="w-full px-5 py-3 rounded-xl bg-primary-bg border border-light-text/40 text-white placeholder-light-text/50 focus:ring-primary-cta focus:border-primary-cta transition" />
                    
                    <button type="submit" class="w-full inline-block bg-accent-gold text-primary-bg font-extrabold text-lg py-3 rounded-xl shadow-lg shadow-accent-gold/30 hover:bg-yellow-400 transition duration-300 transform hover:scale-[1.01]">
                        Subscribe for Updates
                    </button>
                </form>
                
                <!-- NEW: Admin Tools Container (Hidden by default) -->
                <div id="admin-tools" class="hidden">
                    <button onclick="exportEmails(this)" id="export-button" class="export-button mt-6 w-full inline-flex items-center justify-center space-x-2 bg-dark-card border border-light-text/50 text-light-text font-extrabold text-sm py-3 px-4 rounded-xl hover:bg-light-text hover:text-primary-bg transition duration-300">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                        <span>Download Subscriber Emails (Admin Only)</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- 8TH: Footer -->
        <footer class="max-w-7xl mx-auto px-4 py-8 text-center border-t border-light-text/30">
            <p class="text-sm text-light-text/50">
                &copy; 2025 SMART TECH Solutions and Trainings. All Rights Reserved.
            </p>
            <div class="mt-2 text-xs space-x-4 text-light-text/60">
                <a href="#" class="hover:text-white transition">FAQ</a>
                <a href="#" class="hover:text-white transition">Terms & Conditions</a>
                <a href="#" class="hover:text-white transition">Privacy Policy</a>
            </div>
        </footer>

    </div>
    
    <!-- Floating WhatsApp/Chat Button -->
    <button onclick="openWhatsAppChat()" class="fixed-chat-button bg-accent-cyan text-primary-bg font-bold p-4 rounded-full shadow-glow-cyan hover:shadow-3xl transition duration-300 flex items-center space-x-2">
        <!-- WhatsApp Icon (using inline SVG for reliability) -->
        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.031 2.25A9.78 9.78 0 002.25 12.031c0 1.93.535 3.8.423 5.46l-1.013 3.693 3.791-1.025c1.558.42 3.237.618 4.98.618a9.78 9.78 0 009.781-9.781 9.78 9.78 0 00-9.781-9.781zM18.81 16.591a1.05 1.05 0 01-.223.473c-.225.26-.54.382-.897.382a3.83 3.83 0 01-1.782-.486c-.722-.383-1.666-.884-2.736-1.574-.954-.61-1.776-1.353-2.484-2.181a4.84 4.84 0 01-1.121-2.072 1.05 1.05 0 01.38-.905c.15-.12.355-.18.57-.18.15 0 .285.022.405.066s.22.115.32.189c.1.075.18.163.24.267.06.1.09.21.09.324s-.04.22-.12.33c-.08.11-.2.24-.37.388-.17.147-.28.27-.33.364s-.065.18-.065.29c0 .114.04.224.12.33.08.11.2.24.37.388.17.147.37.31.6.49s.48.37.76.57c.28.2.59.39.93.57.34.18.67.33.99.45.32.12.63.17.93.17.3 0 .59-.05.87-.15.28-.1.52-.27.72-.51.2-.24.33-.5.4-.78.07-.28.09-.54.09-.78 0-.28-.06-.52-.18-.72-.12-.2-.29-.36-.51-.48-.22-.12-.39-.18-.51-.18-.17 0-.32.06-.45.18-.13.12-.24.26-.33.42s-.12.34-.12.54c0 .24.04.48.12.72.08.24.2.46.37.66.17.2.39.38.66.54s.55.28.85.36c.3.08.57.12.8.12.23 0 .43-.05.6-.15.17-.1.3-.23.4-.4.1-.17.15-.34.15-.51 0-.25-.05-.48-.15-.7c-.1-.22-.27-.45-.51-.7-.24-.25-.57-.59-1-.07-.43.52-.77.85-1.02 1.02-.25.17-.38.35-.38.54 0 .15.04.29.12.42.08.13.2.26.37.38.17.12.37.23.6.34.23.1.48.15.75.15.28 0 .55-.05.81-.15.26-.1.49-.24.69-.42.2-.18.33-.4.4-.66.07-.26.08-.52.03-.78-.05-.26-.17-.5-.36-.72-.19-.22-.44-.43-.75-.63-.3-.2-.58-.39-.84-.57z"/>
        </svg>
        <span class="text-white font-semibold hidden md:inline">Chat with us (24/7 Support)</span>
    </button>

    <!-- POP-UP MODAL (Exit-Intent / Time Delay) -->
    <div id="conversion-modal" class="modal-overlay" onclick="closePopup(event)">
        <div class="modal-content text-center" onclick="event.stopPropagation()">
            <!-- Close Button -->
            <button onclick="closePopup()" class="absolute top-4 right-4 text-light-text hover:text-white transition" aria-label="Close Pop-up">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            
            <p class="text-xl font-bold uppercase text-accent-gold mb-2 mt-4">WAIT! Don't Miss Out!</p>
            
            <h3 class="text-4xl font-extrabold text-white mb-6">
                Your <span class="text-primary-cta">â‚¦5,000 Early Bird</span> Price is Vanishing!
            </h3>
            
            <p class="text-light-text/90 text-lg mb-8">
                Secure your spot in **10 High-Demand Tracks** and get the Guaranteed Internship access before the price increases to â‚¦8,000.
            </p>
            
            <!-- High-Impact Price Display -->
            <div class="inline-block bg-primary-bg p-4 rounded-lg border-2 border-accent-gold shadow-popup-glow">
                <p class="text-5xl font-black text-accent-gold">
                    â‚¦5,000
                    <span class="text-xl text-light-text/60">/ $3 USD</span>
                </p>
            </div>
            
            <!-- CTA Button -->
            <a href="#final-enrollment" onclick="closePopup()" class="cta-button w-full mt-8 inline-block bg-primary-cta text-white font-extrabold text-xl py-4 rounded-xl shadow-glow-blue hover:opacity-90">
                ðŸ‘‰ YES, I Want the â‚¦5,000 Discount
            </a>
            
            <p class="text-xs text-light-text/50 mt-4">Registration ends Nov 3rd, 2025. Limited seats remaining.</p>

        </div>
    </div>
    
    <!-- Firebase Initialization and Script Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // ====================================================================================
        // *** ADMIN CONFIGURATION AREA (FIXED: NOW A STRING) ***
        //
        // Your Admin User ID has been converted to a string to fix the "leading zeros" error.
        // ====================================================================================
        const ADMIN_USER_ID = "00027452538644333399"; 

        // --- Global Firebase Variables ---
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app;
        let db;
        let auth;
        let userId = null;
        let isAuthReady = false;

        setLogLevel('Debug');
        
        // Function to check if the current user is the Admin and toggle visibility
        function checkAdminStatus() {
            const exportContainer = document.getElementById('admin-tools');
            // Check if the current authenticated user ID matches the hardcoded Admin ID
            if (userId && ADMIN_USER_ID !== "REPLACE_THIS_WITH_YOUR_FIREBASE_UID" && userId === ADMIN_USER_ID) {
                exportContainer.classList.remove('hidden');
                console.log("Admin privileges granted. Download button visible.");
            } else if (exportContainer) {
                exportContainer.classList.add('hidden');
            }
        }

        // --- Core Initialization Function ---
        async function initFirebase() {
            if (!firebaseConfig) {
                console.error("Firebase config is missing.");
                showSystemMessage("Error: Firebase configuration is not available.", 'bg-red-600');
                return;
            }

            try {
                // 1. Initialize App and Services
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // 2. Handle Authentication
                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        // Log the user ID to the console for the admin to copy
                        console.log("Current User ID (Copy this to set ADMIN_USER_ID):", userId); 
                    } else {
                        // User is signed out or initially anonymous
                        try {
                             if (initialAuthToken) {
                                await signInWithCustomToken(auth, initialAuthToken);
                                userId = auth.currentUser.uid;
                                console.log("Current User ID (Copy this to set ADMIN_USER_ID):", userId);
                            } else {
                                await signInAnonymously(auth);
                                userId = auth.currentUser.uid;
                                console.log("Current User ID (Copy this to set ADMIN_USER_ID):", userId);
                            }
                        } catch (error) {
                            console.error("Authentication Error:", error);
                            showSystemMessage("Authentication failed. Data saving will not work.", 'bg-red-600');
                        }
                    }
                    isAuthReady = true;
                    // Run admin check immediately after auth state is determined
                    checkAdminStatus(); 
                });
            } catch (error) {
                console.error("Firebase Initialization Failed:", error);
                showSystemMessage("Error: Could not initialize Firebase services.", 'bg-red-600');
            }
        }
        
        initFirebase();
        
        // --- Helper Function for UI Messages ---
        function showSystemMessage(message, colorClass = 'bg-green-600') {
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');
            
            messageText.textContent = message;
            
            // Clear previous color classes and apply new one
            messageBox.className = 'fixed top-5 right-5 p-4 rounded-xl shadow-lg text-white font-semibold z-[100] transition-all duration-300 transform';
            messageBox.classList.add(colorClass);
            messageBox.classList.remove('hidden'); 
            
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 5000);
        }

        window.hideMessage = () => {
            document.getElementById('message-box').classList.add('hidden');
        }

        window.openWhatsAppChat = () => {
            const phoneNumber = '2348167068421'; 
            const message = encodeURIComponent(
                "Hello SMARTTECH Team, I need help with (Please type your question here, e.g., 'Payment options' or 'Flutter Course content')"
            );
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;
            window.open(whatsappUrl, '_blank');
        }

        // --- Newsletter Submission Logic (Saves to Firestore) ---
        window.submitNewsletter = async (event) => {
            event.preventDefault();
            const emailInput = document.getElementById('newsletter-email');
            const email = emailInput.value.trim();

            if (!isAuthReady || !db) {
                showSystemMessage("System not ready. Please wait a moment and try again.", 'bg-red-600');
                return;
            }

            if (email === "" || !email.includes('@')) {
                showSystemMessage("Please enter a valid email address.", 'bg-red-600');
                return;
            }

            try {
                // Public data path: /artifacts/{appId}/public/data/newsletter_subscribers
                const subscribersCollectionRef = collection(db, `artifacts/${appId}/public/data/newsletter_subscribers`);
                
                await addDoc(subscribersCollectionRef, {
                    email: email,
                    subscribedAt: new Date().toISOString(),
                    subscriberId: userId,
                });

                showSystemMessage(`Success! The email "${email}" has been saved.`);
                emailInput.value = ''; // Clear input

            } catch (error) {
                console.error("Error adding document: ", error);
                showSystemMessage("Failed to save email. Please check the console for details.", 'bg-red-600');
            }
        }

        // --- Export Emails Logic (Fetches from Firestore and creates CSV) ---
        window.exportEmails = async (buttonElement) => {
            if (!isAuthReady || !db || userId !== ADMIN_USER_ID) {
                 showSystemMessage("Unauthorized access attempt blocked.", 'bg-red-600');
                 return;
            }
            
            // Disable button and show loading state
            buttonElement.disabled = true;
            buttonElement.innerHTML = `<svg class="animate-spin w-5 h-5 text-light-text" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span>Fetching Data...</span>`;
            
            try {
                const subscribersCollectionRef = collection(db, `artifacts/${appId}/public/data/newsletter_subscribers`);
                const querySnapshot = await getDocs(subscribersCollectionRef);

                let csvContent = "Email,Subscribed At (UTC),Document ID\n";
                let count = 0;

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const formattedDate = data.subscribedAt ? new Date(data.subscribedAt).toUTCString() : "N/A";
                    // CSV values are escaped in case the email contains a comma, though unlikely
                    csvContent += `"${data.email}", "${formattedDate}", "${doc.id}"\n`;
                    count++;
                });

                if (count === 0) {
                    showSystemMessage("No subscribers found to export.", 'bg-yellow-600');
                    return;
                }

                // Create a Blob and a link to download the CSV
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement("a");
                
                link.href = URL.createObjectURL(blob);
                link.setAttribute('download', `smarttech_subscribers_${new Date().toISOString().slice(0, 10)}.csv`);
                
                // Append to body, click, and remove
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                showSystemMessage(`Successfully exported ${count} subscriber emails to CSV.`, 'bg-green-600');

            } catch (error) {
                console.error("Error exporting emails: ", error);
                showSystemMessage("Failed to export emails. Check permissions or console log.", 'bg-red-600');

            } finally {
                // Re-enable button
                buttonElement.disabled = false;
                buttonElement.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg><span>Download Subscriber Emails (Admin Only)</span>`;
            }
        }
        
        // =========================================================================
        // POP-UP / MODAL LOGIC FOR CONVERSION
        // =========================================================================
        const CONVERSION_POPUP_KEY = 'smarttech_popup_viewed';

        function checkSessionViewed() {
            // Checks if the user has seen the pop-up this session
            return sessionStorage.getItem(CONVERSION_POPUP_KEY) === 'true';
        }

        function setSessionViewed() {
            // Marks the pop-up as viewed for the current session
            sessionStorage.setItem(CONVERSION_POPUP_KEY, 'true');
        }

        window.showPopup = function() {
            const modal = document.getElementById('conversion-modal');
            if (modal && !checkSessionViewed()) {
                modal.classList.add('open');
                setSessionViewed(); // Mark as seen immediately
                // Disable scrolling on the body while modal is open
                document.body.style.overflow = 'hidden'; 
                console.log("Conversion pop-up shown.");
            }
        }

        window.closePopup = function(event) {
             const modal = document.getElementById('conversion-modal');
             if (modal) {
                 // Check if the click originated from the overlay itself, not the content
                 if (event && event.target.id === 'conversion-modal' || !event) {
                     modal.classList.remove('open');
                     // Re-enable scrolling
                     document.body.style.overflow = 'auto'; 
                 }
             }
        }

        // --- Pop-up Triggers ---

        // 1. Time Delay Trigger (7 seconds)
        window.setTimeout(() => {
            window.showPopup();
        }, 7000); 

        // 2. Exit Intent Trigger (Desktop only)
        document.addEventListener('mouseout', (e) => {
            // Check for modern exit intent pattern (mouse moving upwards and out of the viewport)
            if (e.relatedTarget === null && e.clientY < 50) { 
                // Only trigger if screen width is desktop size or larger (e.g., > 768px)
                if (window.innerWidth >= 768) {
                    window.showPopup();
                }
            }
        });

    </script>
</body>
</html>
